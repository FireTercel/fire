<#include "/page/common/_layout.html"/>
<@layout activebar="user" html_title="角色管理">

<div class="tree ">
	<div class="page-header">
		<h3>角色管理</h3>
	</div>
	<div class="row">
		<div class="col-sm-4 col-md-4 col-lg-4">
		<ul>
			<#list roleTree as roles>
				<li>
				<span>
					<i class="glyphicon glyphicon-folder-open"></i> ${(roles.name)!}
				</span>
				<a class="btn btn-info btn-sm"   href="/admin/assignrole?id=${(roles.id)!}"  >权限分配</a> 
				<ul>
					<#list roles.children as role>
					<li>
						<span><i class="glyphicon glyphicon-minus-sign"></i> ${(role.name)!}</span> 
							<a class="btn btn-info btn-sm"   href="/admin/assignrole?id=${(role.id)!}"  >权限分配</a> 
					</li>
					</#list>
				</ul>
				</li>
			</#list>
		</ul>
		</div>
		
		<div id="per" class="col-sm-8 col-md-8 col-lg-8">
			
		</div>
	
	</div>
	

</div>
<div class="index-background">
<form class="bs-example bs-example-form" role="form" action="/" method="get">
	<div class="row">
			<div class="col-lg-2">
				<div class="form-group">
				<span class="input-group-btn">
					<a  class="btn btn-success"  href="/admin/addrole">
				     	新增角色
					</a>
				</span>
				</div>
			</div>
	</div>
</form>
	<table class="table table-bordered table-hover">
		<thead>
			<tr>
				<th width="3%">角色编号</th>
				<th width="4%">角色名称</th>
				<th width="4%">角色代码</th>
				<th width="4%">父节点编号</th>
				<th width="5%">创建时间</th>
				<th width="3%">状态</th>
				<th width="8%">操作</th>
			</tr>
		</thead>
		<tbody>
			<#list roleTree as roles>
			<tr>
				<td>${(roles.id)!}</td>
				<td> ${(roles.name)!}</td>
				<td>${(roles.value)!}</td>
				<td>${(roles.pid)!}</td>
				<td>${(roles.created_at)!}</td>
				<td><#if roles.deleted_at??><span class="glyphicon glyphicon-remove"></span>禁用<#else>正常</#if></td>
				<td><a class="btn btn-primary btn-xs"  href="/admin/editrole?id=${(roles.id)!}" >编辑</a>
				<#if roles.deleted_at??>
				<a class="btn btn-danger btn-xs"  href="/admin/onrole?id=${(roles.id)!}" >启用</a>
				<#else>
				<a class="btn btn-primary btn-xs"  href="/admin/offrole?id=${(roles.id)!}" >禁用</a>
				</#if>
				<a class="btn btn-primary btn-xs"  href="/admin/addrole?id=${(roles.id)!}" >添加</a>
				</td>
			</tr>
			<#list roles.children as role>
				<tr>
				<td>${(role.id)!}</td>
				<td><span class="glyphicon glyphicon-minus-sign"></span>     ${(role.name)!}</td>
				<td>${(role.value)!}</td>
				<td>${(role.pid)!}</td>
				<td>${(role.created_at)!}</td>
				<td><#if role.deleted_at??><span class="glyphicon glyphicon-remove"></span>禁用<#else>正常</#if></td>
				<td>
				<a class="btn btn-primary btn-xs"  href="/admin/editrole?id=${(role.id)!}" >编辑</a>
				<#if role.deleted_at??>
				<a class="btn btn-danger btn-xs"  href="/admin/onrole?id=${(role.id)!}" >启用</a>
				<#else>
				<a class="btn btn-primary btn-xs"  href="/admin/offrole?id=${(role.id)!}" >禁用</a>
				</#if>
				</td>
			</tr>
			</#list>
			</#list>
		</tbody>
	
	</table>

</div>
      
</@layout>