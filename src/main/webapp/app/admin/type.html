<#include "/app/common/layout/__backstagemainlayout.html"/>
<@mainlayout pageJavascript=pageJavascript pageCss=pageCss currentMenu="typeFlag-typesListFlag">

<div class="page-header">
	<h1>
		类型管理
	</h1>
</div>
<form class="bs-example bs-example-form" role="form" action="${ContextPath}/admin/type" method="post">
	<div class="row">
		<div class="col-xs-4" >
			<div class="input-group">
				<span class="input-group-addon">关键字</span> 
				<input class="form-control" id="errorType" name="errorType" value="${(errorType)!}" placeholder="故障类型名称" type="text" autocomplete="off">
				<span class="input-group-btn">
					<button class="btn btn-sm btn-default">
						<span class="glyphicon glyphicon-search"></span> 查询
					</button>
				</span>
			</div>
		</div>
	</div>
</form>
	<table class="table table-bordered table-hover">
		<thead>
			<tr>
				<th width="2%">序号</th>
				<th width="10%">类型名称</th>
				<th width="5%">创建时间</th>
				<th width="4%">状态</th>
				<th width="4%">操作</th>
			</tr>
		</thead>
		<tbody>
			<#list errorTypePage.getList() as type>
			<tr>
				<td>${(type_index+1)!}</td>
				<td> ${(type.name)!}</td>
				<td> ${(type.created_at)!}</td>
				<td><#if type.deleted_at??><span class="glyphicon glyphicon-remove"></span>禁用<#else>正常</#if></td>
				<td><a class="btn btn-minier btn-primary btn-xs"  href="${ContextPath}/admin/edittype?id=${(type.id)!}" >编辑</a>
				<#if type.deleted_at??>
				<a class="btn btn-minier btn-danger btn-xs"  href="${ContextPath}/admin/ontype?id=${(type.id)!}" >启用</a>
				<#else>
				<a class="btn btn-minier btn-primary btn-xs"  href="${ContextPath}/admin/offtype?id=${(type.id)!}" >禁用</a>
				</#if>
				</td>
			</tr>
			</#list>
			<#if errorTypePage.getList().size()!=10>
			<#assign size=(10-errorTypePage.getList().size())>
				<#list 1..size as t>
					<tr>
						<td>${(errorTypePage.getList().size()+t)!}</td>
						<td></td>
						<td></td>
						<td></td>
						<td></td>
					</tr>
				</#list>
			</#if>
		</tbody>
	</table>
	<#include "/page/back/common/_paginate.html" />
	<@paginate currentPage=errorTypePage.pageNumber totalPage=errorTypePage.totalPage actionUrl="/admin/type/" />
</@mainlayout>